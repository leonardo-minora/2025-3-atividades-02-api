# Atividade Pr√°tica: Desenvolvimento de API REST com NestJS

## Descri√ß√£o da Atividade
Esta atividade pr√°tica tem como objetivo consolidar os conhecimentos adquiridos no [tutorial introdut√≥rio de API REST e NestJS](https://github.com/infoweb-pos/api-nest-notas-01-introducao) atrav√©s da implementa√ß√£o de um CRUD completo para gerenciamento de tarefas.

## Objetivos de Aprendizado
Ao final desta atividade, o aluno ser√° capaz de:
- Configurar um projeto NestJS do zero
- Implementar um CRUD completo com TypeORM
- Configurar banco de dados SQLite3
- Aplicar valida√ß√µes com Class Validator
- Testar endpoints de uma API REST
- Implementar boas pr√°ticas de desenvolvimento com NestJS

# Checklist de Progresso da Atividade

Use este checklist para acompanhar seu progresso durante a implementa√ß√£o da API de tarefas.

##Parte 1 - ‚úÖ Pr√©-requisitos e Configura√ß√£o - Nosso checklist

### Verifica√ß√£o do Ambiente
- [X] Node.js (v18+) instalado e funcionando
- [X] npm instalado e funcionando / vou usar o yarn
- [X] Git instalado e configurado
- [X] Editor de c√≥digo (VS Code recomendado) configurado
- [X] Cliente REST (Postman/Insomnia/Thunder Client) instalado / vou usar o cliente rest de um plugin do vscode

### Configura√ß√£o Inicial
- [X] Fork do reposit√≥rio tutorial realizado
- [X] Reposit√≥rio clonado localmente
- [ ] NestJS CLI instalado globalmente (`npm install -g @nestjs/cli`)
  - `-g` significa global e que a lib instalada vira comando no terminal
  - sempre que for instalar um comando novo, vou usar o npm ;-)
- [X] Projeto NestJS criado (`nest new tasks-api`)
  - √© criado uma pasta do projeto nestjs igual ao nome fornecido acima no comando `./tasks-api`
  - vou mover o conte√∫do da pasta para a raiz deste reposit√≥rio `.`
    - excluir `./tasks-api/node_modules` , `./tasks-api/README.md` e `./tasks-api/yarn.lock`
    - quem usa npm n√£o ter√° esse arquivo `./tasks-api/yarn.lock`, ser√° o `./tasks-api/package-lock.json`
- [X] Depend√™ncias instaladas (TypeORM, SQLite, class-validator, etc.)


Agora vamos testar!!!
`yarn run start:dev`

para ativar o menu de comandos do vscode, CTRL+SHIFT+P

GET http://localhost:3000/

top, funcionou!!!


Depois fazer o commit :-P
`git status`
`git add `
`git commit -m "criado e configurado o projeto de api com nestjs"`


## Parte 2 - üóÇÔ∏è Estrutura do Projeto

Vamos criar a rota tasks!!!
Iniciar executando a api

`yarn run start:dev`

antes verificar se as libs est√£o instaladas e o status do git

vamos adicionar as entidades e os dtos

### Cria√ß√£o de Diret√≥rios
- [X] Diret√≥rio `src/tasks` criado
- [X] Diret√≥rio `src/tasks/dto` criado
- [X] Estrutura de pastas organizada conforme especifica√ß√£o

### Arquivos Base
- [X] `app.module.ts` configurado com TypeORM
- [X] `main.ts` configurado com CORS e ValidationPipe
- [X] Configura√ß√£o do banco SQLite implementada

## üìä Implementa√ß√£o da Entity

1. criei os arquivos
2. copiei o entity
3. olhei o terminal para ver se tinha erros
4. copiar os dtos e verificar o terminal
   
### Task Entity (src/tasks/task.entity.ts)
- [X] Classe `Task` criada com decorator `@Entity()`
- [X] Campo `id` com `@PrimaryGeneratedColumn()`
- [X] Campo `title` com `@Column()`
- [X] Campo `description` com `@Column()`
- [X] Campo `status` com enum `TaskStatus` e configura√ß√£o adequada
- [X] Campos `createdAt` e `updatedAt` com decorators de timestamp
- [X] Enum `TaskStatus` definido corretamente (aberto, fazendo, finalizado)

## üìù Implementa√ß√£o dos DTOs

### CreateTaskDto (src/tasks/dto/create-task.dto.ts)
- [X] Classe `CreateTaskDto` criada
- [X] Valida√ß√£o `@IsString()` e `@IsNotEmpty()` no campo `title`
- [X] Valida√ß√£o `@IsString()` e `@IsNotEmpty()` no campo `description`
- [X] Valida√ß√£o `@IsEnum()` e `@IsOptional()` no campo `status`

### UpdateTaskDto (src/tasks/dto/update-task.dto.ts)
- [X] Classe `UpdateTaskDto` criada
- [X] Todos os campos opcionais com `@IsOptional()`
- [X] Valida√ß√µes adequadas mantidas para cada campo

aqui os campos s√£o todos opcionais porque pordemos atualizar apenas um dos campos.

## üîß Implementa√ß√£o do Service
vamos pular o servi√ßo por enquanto

vamos copiar logo :-P
compilando tudo mas ainda n√£o aparece a rota.

### TasksService (src/tasks/tasks.service.ts)
- [X] Classe `TasksService` com decorator `@Injectable()`
- [X] Inje√ß√£o do reposit√≥rio com `@InjectRepository(Task)`
- [X] M√©todo `findAll()` implementado
- [X] M√©todo `findOne(id)` implementado com tratamento de erro 404
- [X] M√©todo `create(createTaskDto)` implementado
- [X] M√©todo `update(id, updateTaskDto)` implementado
- [X] M√©todo `remove(id)` implementado
- [X] Tratamento adequado de erros em todos os m√©todos

## üéÆ Implementa√ß√£o do Controller

### TasksController (src/tasks/tasks.controller.ts)
- [X] Classe `TasksController` com decorator `@Controller('tasks')`
- [X] Inje√ß√£o do service no construtor
- [X] Endpoint `GET /tasks` com decorator `@Get()`
- [X] Endpoint `GET /tasks/:id` com `@Get(':id')` e `ParseIntPipe`
- [X] Endpoint `POST /tasks` com `@Post()` e `@Body()`
- [X] Endpoint `PUT /tasks/:id` com `@Put(':id')` e valida√ß√µes
- [X] Endpoint `DELETE /tasks/:id` com `@Delete(':id')`
- [X] Status codes HTTP adequados configurados

## üì¶ Configura√ß√£o do Module

vamos adicionar a rota agora
primeiro, cria o m√≥dulo tasks
ainda n√£o aparece porque precisa apontar esse m√≥dulo em app.module

### TasksModule (src/tasks/tasks.module.ts)
- [X] Classe `TasksModule` com decorator `@Module()`
- [X] Importa√ß√£o do `TypeOrmModule.forFeature([Task])`
- [X] Controller adicionado ao array `controllers`
- [X] Service adicionado ao array `providers`
- [X] M√≥dulo importado no `AppModule`

vamos testar agora pelo cliente no vs code

GET http://localhost:3000/tasks/

funcionou :-D

n√£o vou por enquanto testar os outros m√©todos...
vamos fazer o commit da parte 2 - rota e crud
`git add .`
`git commit -m ""`


## üöÄ Execu√ß√£o e Testes

### Inicializa√ß√£o da Aplica√ß√£o
- [ ] Aplica√ß√£o inicia sem erros (`npm run start:dev`)
- [ ] Banco de dados SQLite criado automaticamente (tasks.db)
- [ ] Console mostra "API rodando em http://localhost:3000"
- [ ] Hot reload funcionando adequadamente

### Teste dos Endpoints - GET
- [ ] `GET /tasks` retorna array vazio inicialmente (200 OK)
- [ ] `GET /tasks/1` retorna 404 Not Found quando n√£o h√° tarefas

### Teste dos Endpoints - POST
- [ ] `POST /tasks` com dados v√°lidos cria tarefa (201 Created)
- [ ] `POST /tasks` retorna tarefa criada com ID, timestamps
- [ ] `POST /tasks` com t√≠tulo vazio retorna 400 Bad Request
- [ ] `POST /tasks` com status inv√°lido retorna 400 Bad Request

### Teste dos Endpoints - GET com dados
- [ ] `GET /tasks` retorna array com tarefa(s) criada(s)
- [ ] `GET /tasks/1` retorna tarefa espec√≠fica (200 OK)
- [ ] `GET /tasks/999` retorna 404 Not Found

### Teste dos Endpoints - PUT
- [ ] `PUT /tasks/1` com dados v√°lidos atualiza tarefa (200 OK)
- [ ] `PUT /tasks/1` retorna tarefa atualizada
- [ ] `PUT /tasks/999` retorna 404 Not Found
- [ ] Atualiza√ß√£o parcial funciona (apenas alguns campos)

### Teste dos Endpoints - DELETE
- [ ] `DELETE /tasks/1` remove tarefa (204 No Content)
- [ ] `DELETE /tasks/999` retorna 404 Not Found
- [ ] Tarefa removida n√£o aparece mais em `GET /tasks`

## üìã Testes de Valida√ß√£o

### Valida√ß√£o de Entrada
- [ ] Campos obrigat√≥rios (title, description) s√£o validados
- [ ] Status aceita apenas valores v√°lidos (aberto, fazendo, finalizado)
- [ ] Campos extras s√£o ignorados (whitelist ativa)
- [ ] Mensagens de erro s√£o claras e espec√≠ficas

### Valida√ß√£o de IDs
- [ ] IDs n√£o num√©ricos retornam 400 Bad Request
- [ ] IDs decimais s√£o tratados adequadamente
- [ ] IDs negativos s√£o tratados adequadamente
